'use client';

import { notFound } from 'next/navigation';
import styles from '../Patient.module.css';
import {
    FileText,
    FileSignature,
    Stethoscope,
    ClipboardCheck,
    ArrowLeft
} from 'lucide-react';
import Link from 'next/link';

// Тип для карточек
type PatientArticle = {
    id: string;
    title: string;
    icon: React.ReactNode;
    content: string;
};

// Данные для динамических статей
const dynamicArticles: PatientArticle[] = [
    {
        id: 'patient-info',
        title: 'Информация для пациента',
        icon: <FileText size={24} />,
        content: `
            <div class="article-content">
  <h2>Профилактика рака толстого кишечника</h2>
  
  <p>Во всём мире увеличивается заболеваемость раком толстого кишечника. У более <strong>1 миллиона человек</strong> в мире и более <strong>50 тысяч человек</strong> в России ежегодно устанавливается данный диагноз.</p>

  <div class="info-box">
    <h3>Важно знать:</h3>
    <ul>
      <li>Основным предраковым состоянием являются полипы кишечника</li>
      <li>Полипы появляются и растут практически незаметно</li>
      <li>С возрастом риск образования полипов увеличивается</li>
    </ul>
  </div>

  <h3>Скрининг рака толстого кишечника</h3>
  <p>Другого способа выявить полип или рак на ранней стадии, кроме как проводить обследование толстой кишки с определенной периодичностью, не существует.</p>
  
  <p>Это так называемый <strong>скрининг рака толстого кишечника</strong> – выполнение колоноскопии:</p>
  <ul>
    <li>При отсутствии жалоб по достижении <strong>45-летнего</strong> возраста</li>
    <li>Повторно каждые <strong>3–5 лет</strong> (согласно международным рекомендациям)</li>
  </ul>

  <div class="highlight-box">
    <h4>Почему колоноскопия?</h4>
    <p>Колоноскопия является лучшим методом профилактики опухолей толстой кишки, так как позволяет не только выявить, но и <strong>удалить полипы</strong> толстой кишки.</p>
  </div>

  <p>В Европе, Америке и Японии колоноскопия рекомендуется <strong>каждому человеку старше 45 лет</strong>, независимо от жалоб, только для того, чтобы определить риск развития опухолей толстой кишки и выявить полипы.</p>

  <h3>Преимущества колоноскопии:</h3>
  <ul class="advantages-list">
    <li>Возможность взять биопсию для точной диагностики</li>
    <li>Удаление полипов без хирургической операции</li>
    <li>Амбулаторное проведение для небольших полипов</li>
  </ul>

  <h3>Когда обследоваться молодым?</h3>
  <p>При наличии жалоб обследование кишечника рекомендуется и в молодом возрасте:</p>
  <ul>
    <li>В нашей практике были десятки пациентов с раком в возрасте <strong>29–45 лет</strong></li>
    <li>Большинство из них обследованы вовремя и успешно излечены</li>
  </ul>

  <div class="info-box">
    <h3>О болезненности процедуры</h3>
    <p>Многих пугает болезненность при выполнении колоноскопии. Опытный врач-эндоскопист владеет методикой <strong>безболезненного проведения</strong> на уровне терпимых ощущений.</p>
    <p>Для уменьшения дискомфорта возможна <strong>премедикация</strong> (обезболивающие и успокаивающие препараты) после консультации с врачом.</p>
  </div>

  <h2>Гастроскопия (ЭГДС)</h2>
  <p>Эзофагогастродуоденоскопия – метод исследования верхних отделов ЖКТ: пищевода, желудка и двенадцатиперстной кишки.</p>

  <h3>Когда проходить гастроскопию?</h3>
  <ul>
    <li>При наличии жалоб (боли, изжога и др.)</li>
    <li>Лицам <strong>старше 40 лет</strong> – 1 раз в 2 года даже без жалоб</li>
  </ul>

  <div class="warning-box">
    <p>Рак желудка и пищевода на ранних стадиях <strong>не проявляются симптомами</strong>!</p>
  </div>

  <h3>Преимущества гастроскопии:</h3>
  <ul class="advantages-list">
    <li>Тщательный осмотр органов пищеварения</li>
    <li>Возможность биопсии для точной диагностики</li>
    <li>Анализ на <em>Хеликобактер пилори</em> (причина гастритов и язв)</li>
  </ul>

  <div class="important-note">
    <h4>О безопасности процедур</h4>
    <p>Качественная дезинфекция эндоскопа требует <strong>15–20 минут</strong>. На приём одного пациента должно выделяться не менее 20 минут для полноценной обработки оборудования от вирусов и бактерий.</p>
  </div>
</div>
        `
    },
    {
        id: 'fks-consent',
        title: 'Согласие на ФКС',
        icon: <FileSignature size={24} />,
        content: `
            <div class="consent-document">
  <div class="clinic-header">
    <h2>ООО Медицинский Центр «Эндокам»</h2>
    <p>г. Набережные Челны, пр. Набережночелнинский, д. 5б</p>
  </div>

  <h1 class="document-title">ИНФОРМИРОВАННОЕ ДОБРОВОЛЬНОЕ СОГЛАСИЕ ПАЦИЕНТА<br>НА ВЫПОЛНЕНИЕ ЭНДОСКОПИЧЕСКОГО ИССЛЕДОВАНИЯ / ВМЕШАТЕЛЬСТВА</h1>
  <h2 class="procedure-name">ДИАГНОСТИЧЕСКАЯ И ЛЕЧЕБНАЯ КОЛОНОСКОПИЯ (ФКС)</h2>

  <div class="patient-notice">
    <p>Уважаемый пациент! Просим Вас внимательно прочитать все разделы этого документа и ответить на поставленные вопросы.</p>
  </div>

  <div class="section">
    <h3>О ПРОЦЕДУРЕ</h3>
    <p>Рекомендованное Вам эндоскопическое исследование позволяет врачу осмотреть внутреннюю поверхность толстой кишки, в ряде случаев – дистальные отделы тонкой кишки, и выявить их заболевания. В зависимости от показаний, оно производится в неотложном или плановом порядке.</p>
    
    <p>Колоноскопия выполняется при помощи гибкого эндоскопа, который проводится в прямую кишку через задний проход. Проведение эндоскопа, как правило, не вызывает сильной боли, однако возможен дискомфорт в заднем проходе и ощущение вздутия живота.</p>
    
    <div class="procedure-details">
      <h4>Дополнительные методы во время ФКС:</h4>
      <ul>
        <li>Хромоскопия (окраска слизистой оболочки)</li>
        <li>Биопсия (взятие образцов ткани на анализ)</li>
        <li>Полипэктомия небольших полипов</li>
      </ul>
      
      <div class="important-info">
        <p><strong>Средняя продолжительность исследования:</strong> 15-30 минут</p>
        <p>Видеоматериалы и другие данные, полученные во время исследования, принадлежат лечебному учреждению и могут быть использованы для научных и образовательных целей.</p>
      </div>
    </div>
  </div>

  <div class="section preparation-section">
    <h3>ПОДГОТОВКА К ИССЛЕДОВАНИЮ</h3>
    <p>Успех исследования и диагностики во многом зависит от качества подготовки толстой кишки. Существует несколько методов подготовки кишки к исследованию, обсудите подходящий для Вас способ с врачом и медсестрой.</p>
    
    <div class="preparation-steps">
      <div class="step">
        <h4>За 3 дня до исследования:</h4>
        <p>Исключить из питания растительную клетчатку (фрукты, овощи, чёрный хлеб, каши)</p>
      </div>
      
      <div class="step">
        <h4>Накануне и в день исследования:</h4>
        <p>Не принимать пищу</p>
      </div>
      
      <div class="step">
        <h4>Приём лекарств:</h4>
        <p>Если Вы постоянно принимаете лекарственные средства, согласуйте режим и условия их приёма с врачом</p>
      </div>
    </div>
    
    <div class="arrival-info">
      <h4>В день исследования:</h4>
      <p>Просим Вас прибыть в эндоскопический кабинет в назначенное время с:</p>
      <ul>
        <li>Паспортом</li>
        <li>Медицинской документацией</li>
        <li>Чистой простыней</li>
      </ul>
    </div>
  </div>

  <div class="section complications-section">
    <h3>ВОЗМОЖНЫЕ ОСЛОЖНЕНИЯ</h3>
    <p class="warning-note">Предстоящее Вам эндоскопическое исследование является инвазивным инструментальным вмешательством и, несмотря на низкий уровень побочных эффектов (не более 0,4%) и максимально бережное выполнение, всё же несёт в себе риск возникновения следующих осложнений:</p>
    
    <ol class="complications-list">
      <li>Перфорация органа</li>
      <li>Пневмоперитонеум</li>
      <li>Кровотечение</li>
      <li>Сердечно-сосудистое расстройство</li>
      <li>Местные и аллергические реакции</li>
      <li>Обострение хронического заболевания</li>
    </ol>
    
    <div class="complications-notice">
      <p>При возникновении вышеперечисленных осложнений может потребоваться:</p>
      <ul>
        <li>Госпитализация</li>
        <li>Неотложное интенсивное лечение</li>
        <li>Эндоскопическое и оперативное лечение</li>
        <li>Общая анестезия</li>
      </ul>
    </div>
  </div>

  <div class="section after-procedure">
    <h3>ПОСЛЕ ОКОНЧАНИЯ ИССЛЕДОВАНИЯ</h3>
    <ul>
      <li>Может сохраняться ощущение вздутия живота, которое пройдет после отхождения газов</li>
      <li>Если выполнялась биопсия, следует исключить физические нагрузки в течение суток</li>
      <li>Не рекомендуется водить машину, управлять какими-либо механизмами или принимать важные решения в течение 1 часа</li>
    </ul>
    
    <div class="emergency-notice">
      <p><strong>При появлении необычных симптомов и тревожащих Вас обстоятельств</strong> в первые часы и дни после исследования необходимо обратиться в приёмный покой стационара по месту жительства.</p>
    </div>
  </div>

  <div class="section alternatives-section">
    <h3>АЛЬТЕРНАТИВА ФКС</h3>
    <p>Эндоскопическое исследование является одним из самых достоверных методов диагностики. Однако, в силу объективных причин, его выполнение в полном объёме и постановка точного диагноза возможны не во всех случаях.</p>
    
    <div class="alternatives-list">
      <p><strong>Возможной альтернативой ФКС являются лучевые методы исследования:</strong></p>
      <ul>
        <li>Ирригоскопия</li>
        <li>Компьютерная томография толстого кишечника</li>
      </ul>
    </div>
  </div>

  <div class="consent-section">
    <h3>ДЕКЛАРАЦИЯ ПАЦИЕНТА</h3>
    <div class="consent-text">
      <p>ДАЮ СОГЛАСИЕ НА ПРОВЕДЕНИЕ ФКС И ДОПОЛНИТЕЛЬНЫХ ИССЛЕДОВАНИЙ. Содержание настоящего документа мною прочитано и полностью мне понятно.</p>
      
      <p>Мне была предоставлена возможность задавать любые вопросы, связанные с предстоящим исследованием и меня полностью информировали о его назначении, особенностях проведения, возможных осложнениях и последствиях.</p>
      
      <p>Я доверяю врачу и его коллегам принять необходимое решение в соответствии с их профессиональным суждением и выполнить любые медицинские действия, которые они сочтут необходимыми для улучшения моего состояния.</p>
      
      <p>Я подтверждаю, что врач был мной проинформирован об известных мне на дату подписания настоящего документа проблемах со здоровьем, хронических и инфекционных заболеваниях (в том числе ВИЧ, гепатит), о всех случаях аллергической или индивидуальной непереносимости лекарственных препаратов, злоупотреблении алкоголем или наркотическими препаратами, о наличии беременности.</p>
      
      <p class="final-notice">Я признаю свою ответственность в случае умышленного сокрытия данной информации от медицинского учреждения и врачей.</p>
    </div>
  </div>
</div>
        `
    },
    {
        id: 'egds-consent',
        title: 'Согласие на ЭГДС',
        icon: <Stethoscope size={24} />,
        content: `
            <h2>Информированное согласие на эзофагогастродуоденоскопию (ЭГДС)</h2>
            <p>Я даю согласие на проведение эндоскопического исследования верхних отделов ЖКТ.</p>
            <h3>Мне известно, что:</h3>
            <ul>
                <li>Исследование проводится натощак</li>
                <li>Возможны неприятные ощущения</li>
                <li>Может быть предложена седация</li>
            </ul>
        `
    },
    {
        id: 'rrs-consent',
        title: 'Согласие на RRS',
        icon: <ClipboardCheck size={24} />,
        content: `
            <h2>Согласие на ректороманоскопию (RRS)</h2>
            <p>Я соглашаюсь на проведение ректороманоскопии - эндоскопического исследования прямой и сигмовидной кишки.</p>
            <h3>Подготовка включает:</h3>
            <ul>
                <li>Очистительную клизму вечером и утром</li>
                <li>Легкий ужин накануне</li>
                <li>Отказ от завтрака в день исследования</li>
            </ul>
        `
    }
];

export default async function PatientArticlePage(props: {
    params: Promise<{ id: string }>;
}) {
    const { id } = await props.params;
    const article = dynamicArticles.find(a => a.id === id);

    if (!article) return notFound();

    return (
        <section className={styles.articlePage}>
            <div className={styles.articleHeader}>
                <div className={styles.articleIcon}>{article.icon}</div>
                <h1 className={styles.articleTitle}>{article.title}</h1>
            </div>

            <div
                className={styles.articleContent}
                dangerouslySetInnerHTML={{ __html: article.content }}
            />

            <Link href="/patient" className={styles.backButton}>
                <ArrowLeft size={18} className={styles.backIcon} />
                Вернуться к списку материалов
            </Link>
        </section>
    );
}